<div style="width:415px;float:left;">
    <div id="doclist_sg">
	<div style="float: left;font-weight: bold;padding-top: 8px;">
	    <img src="img/table16.png" style="width:16px;height: 16px;"> Документы
	</div>
	<div style="float: right">
	    <span class="icon-24 icon-refresh" title="Обновить"> </span> 
	</div>
    </div>
    <div id="myGrid" style="width:100%;height:700px;"></div>
</div>
<script>
    (function($){
	function dateFormatter(row, cell, value, columnDef, dataContext){
	    var date_parts=value.split(' ')[0].split('-');
	    var date=date_parts[2]+'.'+date_parts[1]+'.'+date_parts[0];
	    return '<span title="'+value.split(' ')[1]+'">'+date+'</span>';
	}
	function tooltip(row, cell, value, columnDef, dataContext){
	    if( !value ){
		return '';
	    }
	    var parts = value.split(' ');
	    var cmd = parts.shift();
	    if (cmd){
		var style='max-width:16px;height:auto';
		return '<img src="img/' + cmd + '.png" style="'+style+'" title="' + parts.join(' ') + '">';
	    }
	    else{
		return '';
	    }	    
	}
	
	var settings={
	    columns:[
		{name: "Контрагент", field: "pcomp_label", width: 120 },
		{name: "", field: "doc_type_icon", width: 25,formatter:tooltip},
		{name: "Дата", field: "cstamp",  width: 70, sortable: true,formatter:dateFormatter },
		{name: "Номер", field: "doc_num", width: 50, sortable: true,cssClass:'slick-align-right' },
		{name: "Сумма", field: "doc_total", width: 70 },
		{name: "Оплачен", field: "trans_status", width: 25,formatter:tooltip},
		{name: "Проведен", field: "is_commited", width: 25,formatter:tooltip},
		{name: "Тип документа", field: "doc_type_name", width: 150 },
		{name: "Напечатано", field: "views", width: 70},
		
	    ],
	    options:{
		enableCellNavigation: true,
		enableColumnReorder: false,
		enableFilter:true,
		url:'DocumentList/listFetch'
	    }
	};
	var h = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
	$("#myGrid").css('height',(h-$("#myGrid").position().top-30)+'px');
	var docList=$("#myGrid").slickgrid(settings);
	
	$("#doclist_sg .icon-refresh").click(function(){
	    docList.reload();
	});
	
    })($);
</script>
